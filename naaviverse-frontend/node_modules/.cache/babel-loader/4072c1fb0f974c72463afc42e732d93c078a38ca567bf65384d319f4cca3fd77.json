{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chint\\\\Downloads\\\\Naaviverse 2\\\\naaviverse-frontend\\\\src\\\\pages\\\\dashboard\\\\MallProduct\\\\Step4.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { buyProduct } from \"./apidata\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useStore } from \"../../../components/store/store.ts\";\nimport axios from \"axios\";\nimport { LoadingAnimation1 } from \"../../../components/LoadingAnimation1\";\nimport lg1 from \"../../../static/images/login/lg1.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Step4 = ({\n  setAcceptOffer\n}) => {\n  _s();\n  const userDetails = JSON.parse(localStorage.getItem(\"user\"));\n  const [isloading, setisloading] = useState(true);\n  const [isfinalstep, setIsfinalstep] = useState(false);\n  const [profileId, setProfileId] = useState(\"\");\n  const [errMsg, setErrMsg] = useState(\"\");\n  const {\n    setBuy,\n    mallselectedCoin,\n    index,\n    setIndex\n  } = useStore();\n  const navigate = useNavigate();\n  useEffect(() => {\n    var _userDetails$user;\n    let email = userDetails === null || userDetails === void 0 ? void 0 : (_userDetails$user = userDetails.user) === null || _userDetails$user === void 0 ? void 0 : _userDetails$user.email;\n    if (email) {\n      axios.get(`https://comms.globalxchange.io/user/details/get?email=${email}`).then(res => {\n        const {\n          data\n        } = res;\n        if (data !== null && data !== void 0 && data.status) {\n          setProfileId(data === null || data === void 0 ? void 0 : data.user[\"naavi_profile_id\"]);\n        }\n      });\n    }\n  }, []);\n\n  // useEffect(() => {\n  //   let product = localStorage.getItem(\"product\");\n  //   setIndex(JSON.parse(product));\n  // }, []);\n\n  useEffect(() => {\n    if (profileId && index) {\n      var _userDetails$user2;\n      let userEmail = userDetails === null || userDetails === void 0 ? void 0 : (_userDetails$user2 = userDetails.user) === null || _userDetails$user2 === void 0 ? void 0 : _userDetails$user2.email;\n      let token = userDetails === null || userDetails === void 0 ? void 0 : userDetails.idToken;\n      let billing = index !== null && index !== void 0 && index.lifetime ? \"lifetime\" : index !== null && index !== void 0 && index.monthly ? \"monthly\" : \"annual\";\n      let obj = {\n        email: userEmail,\n        token: token,\n        product_id: index === null || index === void 0 ? void 0 : index.product_id,\n        billing_method: billing,\n        pay_with_coin: mallselectedCoin === null || mallselectedCoin === void 0 ? void 0 : mallselectedCoin.coinSymbol,\n        app_code: \"naavi\",\n        profile_id: profileId,\n        client_app: 'naavi'\n      };\n\n      // console.log(obj, \"obj\");\n\n      buyProduct(obj).then(response => {\n        let result = response === null || response === void 0 ? void 0 : response.data;\n        // console.log(result, 'result');\n        if (result !== null && result !== void 0 && result.status) {\n          setIsfinalstep(true);\n          setisloading(false);\n        } else {\n          setisloading(false);\n          setErrMsg(result === null || result === void 0 ? void 0 : result.message);\n        }\n      });\n    }\n  }, [profileId, index]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isloading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-component\",\n      style: {\n        width: \"100%\",\n        display: \"flex\",\n        height: \"100%\",\n        alignItems: \"center\",\n        flexDirection: \"column\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(LoadingAnimation1, {\n        icon: lg1,\n        width: 200\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom-textt\",\n        children: [\"Buying \", index === null || index === void 0 ? void 0 : index.product_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: isfinalstep ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success-text-cs\",\n          children: [\"You Have Successfully Subscribed To \", index === null || index === void 0 ? void 0 : index.product_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttonss-cs\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"buy-btn-cs\",\n            children: \"See Receipt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"share-btn-cs\",\n            onClick: () => {\n              setBuy(\"step1\");\n              setErrMsg(\"\");\n              setIsfinalstep(false);\n              setAcceptOffer(false);\n              setIndex([]);\n            },\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success-text-cs\",\n          children: errMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttonss-cs\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"share-btn-cs\",\n            style: {\n              textAlign: \"center\"\n            },\n            onClick: () => {\n              // navigate(\"/dashboard/users\");\n              setBuy(\"step1\");\n              setErrMsg(\"\");\n              setIsfinalstep(false);\n              setAcceptOffer(false);\n              setIndex([]);\n            },\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false)\n  }, void 0, false);\n};\n_s(Step4, \"KFzLci4a4L7uHOTErdZXEWekjaA=\", false, function () {\n  return [useStore, useNavigate];\n});\n_c = Step4;\nexport default Step4;\nvar _c;\n$RefreshReg$(_c, \"Step4\");","map":{"version":3,"names":["React","useEffect","useState","buyProduct","useNavigate","useStore","axios","LoadingAnimation1","lg1","jsxDEV","_jsxDEV","Fragment","_Fragment","Step4","setAcceptOffer","_s","userDetails","JSON","parse","localStorage","getItem","isloading","setisloading","isfinalstep","setIsfinalstep","profileId","setProfileId","errMsg","setErrMsg","setBuy","mallselectedCoin","index","setIndex","navigate","_userDetails$user","email","user","get","then","res","data","status","_userDetails$user2","userEmail","token","idToken","billing","lifetime","monthly","obj","product_id","billing_method","pay_with_coin","coinSymbol","app_code","profile_id","client_app","response","result","message","children","className","style","width","display","height","alignItems","flexDirection","icon","fileName","_jsxFileName","lineNumber","columnNumber","product_name","onClick","textAlign","_c","$RefreshReg$"],"sources":["C:/Users/chint/Downloads/Naaviverse 2/naaviverse-frontend/src/pages/dashboard/MallProduct/Step4.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { buyProduct } from \"./apidata\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useStore } from \"../../../components/store/store.ts\";\r\nimport axios from \"axios\";\r\nimport { LoadingAnimation1 } from \"../../../components/LoadingAnimation1\";\r\nimport lg1 from \"../../../static/images/login/lg1.svg\";\r\n\r\nconst Step4 = ({ setAcceptOffer }) => {\r\n  const userDetails = JSON.parse(localStorage.getItem(\"user\"));\r\n  const [isloading, setisloading] = useState(true);\r\n  const [isfinalstep, setIsfinalstep] = useState(false);\r\n  const [profileId, setProfileId] = useState(\"\");\r\n  const [errMsg, setErrMsg] = useState(\"\");\r\n  const { setBuy, mallselectedCoin, index, setIndex } = useStore();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    let email = userDetails?.user?.email;\r\n    if (email) {\r\n      axios\r\n        .get(`https://comms.globalxchange.io/user/details/get?email=${email}`)\r\n        .then((res) => {\r\n          const { data } = res;\r\n          if (data?.status) {\r\n            setProfileId(data?.user[\"naavi_profile_id\"]);\r\n          }\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   let product = localStorage.getItem(\"product\");\r\n  //   setIndex(JSON.parse(product));\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    if (profileId && index) {\r\n      let userEmail = userDetails?.user?.email;\r\n      let token = userDetails?.idToken;\r\n      let billing = index?.lifetime\r\n        ? \"lifetime\"\r\n        : index?.monthly\r\n        ? \"monthly\"\r\n        : \"annual\";\r\n\r\n      let obj = {\r\n        email: userEmail,\r\n        token: token,\r\n        product_id: index?.product_id,\r\n        billing_method: billing,\r\n        pay_with_coin: mallselectedCoin?.coinSymbol,\r\n        app_code: \"naavi\",\r\n        profile_id: profileId,\r\n        client_app: 'naavi'\r\n      };\r\n\r\n      // console.log(obj, \"obj\");\r\n\r\n      buyProduct(obj).then((response) => {\r\n        let result = response?.data;\r\n        // console.log(result, 'result');\r\n        if (result?.status) {\r\n          setIsfinalstep(true);\r\n          setisloading(false);\r\n        } else {\r\n          setisloading(false);\r\n          setErrMsg(result?.message);\r\n        }\r\n      });\r\n    }\r\n  }, [profileId, index]);\r\n\r\n  return (\r\n    <>\r\n      {isloading ? (\r\n        <div\r\n          className=\"loading-component\"\r\n          style={{\r\n            width: \"100%\",\r\n            display: \"flex\",\r\n            height: \"100%\",\r\n            alignItems: \"center\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <LoadingAnimation1 icon={lg1} width={200} />\r\n          <div className=\"bottom-textt\">Buying {index?.product_name}</div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {isfinalstep ? (\r\n            <>\r\n              <div className=\"success-text-cs\">\r\n                You Have Successfully Subscribed To {index?.product_name}\r\n              </div>\r\n              <div className=\"buttonss-cs\">\r\n                <div className=\"buy-btn-cs\">See Receipt</div>\r\n                <div\r\n                  className=\"share-btn-cs\"\r\n                  onClick={() => {\r\n                    setBuy(\"step1\");\r\n                    setErrMsg(\"\");\r\n                    setIsfinalstep(false);\r\n                    setAcceptOffer(false);\r\n                    setIndex([]);\r\n                  }}\r\n                >\r\n                  Close\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div className=\"success-text-cs\">{errMsg}</div>\r\n              <div className=\"buttonss-cs\">\r\n                <div\r\n                  className=\"share-btn-cs\"\r\n                  style={{ textAlign: \"center\" }}\r\n                  onClick={() => {\r\n                    // navigate(\"/dashboard/users\");\r\n                    setBuy(\"step1\");\r\n                    setErrMsg(\"\");\r\n                    setIsfinalstep(false);\r\n                    setAcceptOffer(false);\r\n                    setIndex([]);\r\n                  }}\r\n                >\r\n                  Close\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Step4;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}